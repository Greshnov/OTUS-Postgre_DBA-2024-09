# OTUS-Postgre_DBA-2024-09
## Александр Грешнов

### Homework 8. Журналы 

#### Часть 1. Настройка контрольной точки
1. В VirtualBox создана виртуальная машина (2core CPU, 4Gb RAM, SSD(VDI)) 10Gb), установлена ОС Debian. Установлен PostgreSQL 15. (см. [Homework 1](/Homework/HW-1.md), [Homework 6](/Homework/HW-6.md) ).

2. Настроено выполнение контрольной точки раз в 30 секунд.

```
# Заходим под пользователем postgres
sudo su - postgres
# Созданные кластеры
pg_lsclusters

psql
# Текущее значение настройки выполнения контрольной точки
\x;
select * from pg_settings where name = 'checkpoint_timeout';
# или
show checkpoint_timeout;

# Устанавливаем значение настройки выполнения контрольной точки
ALTER SYSTEM SET checkpoint_timeout TO '30';

# Перезапускаем сервер
\q
pg_ctlcluster 15 main stop
pg_ctlcluster 15 main start

```
![image](https://github.com/user-attachments/assets/5c851c16-fb8b-4dd8-91cf-9467ae6ca5c7)


#### Часть 2. Нагрузка
1. В течение 10 минут c помощью утилиты pgbench подана нагрузка.
```
pgbench -i postgres
pgbench -P 10 -P 60 -T 600 postgres
```
![image](https://github.com/user-attachments/assets/3c3fd333-a019-4e69-bd9a-3bcbcd9a27af)

2. Измерен объем сгенерированных журнальных файлов за время нагрузки. В среднем на одну контрольную точку приходится объём, равный ???.
```
...
```
![image](https://github.com/user-attachments/assets/95d6506f-c3b5-4896-8bcc-731682088f4e)


3. По данным статистики: все ли контрольные точки выполнялись точно по расписанию. Почему так произошло?

#### Часть 3. Сравнение tps в синхронном/асинхронном режиме
1. Утилита pgbench запущена в синхронном и асинхронном режиме. В синхронном получили значение tps, равным ??, в асинхронном - ??. Так как ...
```
...
```


#### Часть 4. Кластер с контрольной суммой
1. Создан новый кластер с включенной контрольной суммой страниц.
```
...
```

2. Создана таблица с несколькими значениями. Выключите кластер. Измените пару байт в таблице. Включите кластер и сделайте выборку из таблицы. Что и почему произошло? как проигнорировать ошибку и продолжить работу?
```
...
```

3. Кластер выключен. Изменена пара байт в таблице. Включите кластер и сделайте выборку из таблицы. Что и почему произошло? как проигнорировать ошибку и продолжить работу?
```
...
```

4. Кластер включен и сделана выборка из таблицы. Что и почему произошло? как проигнорировать ошибку и продолжить работу?
```
...
```
