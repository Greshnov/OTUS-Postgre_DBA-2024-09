# OTUS-Postgre_DBA-2024-09
## Александр Грешнов

### Homework 1. SQL и реляционные СУБД. Введение в PostgreSQL

#### Часть 1. Создание ВМ (виртуальной машины), подключение к ней, и установка СУБД PostgreSQL.
1. В VirtualBox установлена ОС Ubuntu, создан пользователь alex с правами на root.
2. На Windows-системе сгенерирован ключ, для подключения к ВМ по ssh.
![2025-01-16_12-30-12](https://github.com/user-attachments/assets/75108ee4-7cc0-408d-90c3-01e11cb59293)
3. На ВМ поднят ssh-сервер и добавлен открытая часть ssh-ключа пользователя.  
![image](https://github.com/user-attachments/assets/986f2226-28c0-48f2-9800-4c949b27c39d)
4. Через PuTTY (добавлена закрытая часть shh-ключа пользователя) осуществлено подключение к ВМ, установлен PostgreSQL. 
![image](https://github.com/user-attachments/assets/3a64be88-3624-44db-a756-a2e60af95f33)
![image](https://github.com/user-attachments/assets/b9ad0d57-22b6-4cf4-800e-03fdcb5cd5b8)

#### Часть 2. Работа с БД
1. Запущены две сессии, на каждой psql из-под пользователя postgres. В первой - создана таблица и наполнена данными.  
![image](https://github.com/user-attachments/assets/ba4826da-3e34-4369-adeb-51086aed71c1)\
2. Текущий уровень изоляции - read committed. \
![image](https://github.com/user-attachments/assets/a0ed67e8-bb2b-4912-9551-f1dc0a933941)
3. В обоих сессиях начаты транзакции. В первой сессии выполнен запрос на добавление записи в таблицу. Во второй - выборка из этой же таблицы.\
   **Добавленная запись во второй сессии (во второй транзакции) не отображается, так как транзакция в первой сессии не завершена. Добавленная запись находится в "буфере" первой транзакции. Вторая транзакция при уровне изоляции Read Committed не видит незафиксированных изменений другими транзакциями.**\
![image](https://github.com/user-attachments/assets/f5f2610f-4b9d-442e-a475-7134b5736949)\
![image](https://github.com/user-attachments/assets/eeaa0939-a791-4faa-9535-bb203c3dc6ea)\

5. Первая транзакция завершена (Commit), во второй тразакции в выборке отобразилась добавленная запись.\
   **Так как первая транзакция завершилась - изменение зафиксировалось (добавленная запись из "буфера" перешла в реальную таблицу), то запись добавилась в таблицу и стала доступна для выборки. Повторная выборка при уровне изоляции Read Committed видит зафиксированные изменения другими транзакциями.**
   ![image](https://github.com/user-attachments/assets/2422f4b7-7686-422d-af93-77c9339aef8b)\
   ![image](https://github.com/user-attachments/assets/9e3d0f19-6e8b-469d-9934-55e9aebaff10)


7. Начаты новые repeatable read транзации. В первой сессии - добавление записи, во второй - выборка.\
   **Добавленная запись во второй сессии (во второй транзакции) не отображается, так как транзакция в первой сессии не завершена. Добавленная запись находится в "буфере" первой транзакции. В реальной таблице записи ещё нет.**
![image](https://github.com/user-attachments/assets/85a6100a-70fa-4883-8708-cab5be8b5907)\
![image](https://github.com/user-attachments/assets/effcdfd1-111c-425a-a157-48c5a7defa1e)

9. Первая транзакция завершена (Commit), во второй тразакции в выборке не отобразилась добавленная запись.\
 **Так как первая транзакция завершилась (добавленная запись из "буфера" перешла в реальную таблицу), то запись добавилась в таблицу и стала доступна для выборки, но из-за уровня изоляции Repeatable Read во второй транзакции остался снимок этой таблицы на начало транзакции (после первого запроса на выборку ). \
   В режиме Repeatable Read видны только те данные, которые были зафиксированы до начала транзакции, но не видны незафиксированные данные и изменения, произведённые другими транзакциями в процессе выполнения данной транзакции.**\
![image](https://github.com/user-attachments/assets/ca7c0024-108c-4dda-9cc4-fe85b83e2f32)
![image](https://github.com/user-attachments/assets/555c4117-1148-4e7f-91ff-3221ca62a61d)

11. Вторая транзакция завершена (Commit), во второй сессии в выборке отобразилась добавленная запись.\
 **Так как вторая транзакция завершилась, стали доступны данные для выборки из основной таблицы (не из снимка второй транзакции)**\
![image](https://github.com/user-attachments/assets/b61c9d0d-5ad0-4610-a4c7-592e073ba257)



  



   



...
